---
export interface Props {
  name: string;
  class?: string;
  size?: number;
  color?: string;
  strokeWidth?: number;
}

const {
  name,
  class: className = '',
  size = 20,
  color = 'currentColor',
  strokeWidth = 2,
} = Astro.props;

// Define available icons
const availableIcons = {
  phone: () => import('@lucide/astro/icons/phone'),
  mail: () => import('@lucide/astro/icons/mail'),
};

// Get the icon
let IconComponent;
try {
  if (availableIcons[name]) {
    const module = await availableIcons[name]();
    IconComponent = module.default;
  } else {
    console.error(`Icon "${name}" not defined in availableIcons`);
  }
} catch (error) {
  console.error(`Error loading icon "${name}":`, error);
}
---

{
  IconComponent ? (
    <IconComponent
      size={size}
      color={color}
      stroke-width={strokeWidth}
      class={`inline-block align-middle ${className}`}
    />
  ) : (
    <span class="text-red-500">[Icon not found: {name}]</span>
  )
}
